<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Engineer Power Grid Simulator</title>
  <style>
    :root {
      --bg: #0a0e1a;
      --card: #1a2540;
      --text: #e9f2ff;
      --accent: #7cf4ff;
      --border: rgba(124, 244, 255, 0.3);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: ui-rounded, system-ui, sans-serif;
      background: linear-gradient(180deg, #0a0e1a, #1a2540);
      color: var(--text);
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }
    h1 {
      font-size: 2.5rem;
      color: var(--accent);
    }
    .back-btn {
      padding: 12px 24px;
      background: rgba(124, 244, 255, 0.2);
      border: 2px solid var(--border);
      border-radius: 12px;
      color: var(--accent);
      text-decoration: none;
      font-weight: 700;
      transition: all 0.3s ease;
    }
    .back-btn:hover {
      background: rgba(124, 244, 255, 0.3);
      transform: translateY(-2px);
    }
    .simulator {
      display: grid;
      grid-template-columns: 1fr 300px;
      gap: 20px;
      margin-top: 20px;
    }
    .visualizer {
      background: var(--card);
      border: 2px solid var(--border);
      border-radius: 20px;
      padding: 30px;
      min-height: 500px;
    }
    .grid-display {
      width: 100%;
      height: 400px;
      background: #0a0e1a;
      border-radius: 12px;
      position: relative;
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      padding: 20px;
    }
    .grid-node {
      background: rgba(124, 244, 255, 0.2);
      border: 2px solid rgba(124, 244, 255, 0.5);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      transition: all 0.3s ease;
    }
    .grid-node.active {
      background: rgba(124, 244, 255, 0.4);
      box-shadow: 0 0 20px rgba(124, 244, 255, 0.6);
    }
    .grid-node.overload {
      background: rgba(255, 107, 107, 0.4);
      border-color: #ff6b6b;
      animation: blink 0.5s infinite;
    }
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    .controls {
      background: var(--card);
      border: 2px solid var(--border);
      border-radius: 20px;
      padding: 20px;
    }
    .control-group {
      margin-bottom: 25px;
    }
    .control-group label {
      display: block;
      font-weight: 700;
      margin-bottom: 10px;
      color: var(--accent);
    }
    .control-group input[type="range"] {
      width: 100%;
      height: 8px;
      background: rgba(124, 244, 255, 0.2);
      border-radius: 4px;
      outline: none;
    }
    .control-group input[type="range"]::-webkit-slider-thumb {
      appearance: none;
      width: 20px;
      height: 20px;
      background: var(--accent);
      border-radius: 50%;
      cursor: pointer;
    }
    .value-display {
      display: inline-block;
      padding: 4px 12px;
      background: rgba(124, 244, 255, 0.2);
      border-radius: 8px;
      font-weight: 700;
      margin-top: 8px;
    }
    .info {
      margin-top: 20px;
      padding: 15px;
      background: rgba(124, 244, 255, 0.1);
      border-radius: 12px;
      font-size: 0.9rem;
      line-height: 1.6;
    }
    .status-ok {
      color: #9CFF6E;
    }
    .status-warn {
      color: #FFD166;
    }
    .status-danger {
      color: #ff6b6b;
    }
    @media (max-width: 768px) {
      .simulator {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>‚ö° Owen's Power Grid Challenge</h1>
      <a href="index.html" class="back-btn">‚Üê Back to Home</a>
    </div>
    
    <!-- Educational Content Section -->
    <div style="background: var(--card); border: 2px solid var(--border); border-radius: 20px; padding: 30px; margin-bottom: 30px;">
      <h2 style="color: var(--accent); margin-bottom: 20px;">üìñ Lesson: Geomagnetic Storms and Power Grids</h2>
      
      <div style="margin-bottom: 25px;">
        <h3 style="color: var(--accent); font-size: 1.3rem; margin-bottom: 10px;">üéØ Definition</h3>
        <p style="line-height: 1.8;">Geomagnetic storms occur when solar wind from coronal mass ejections (CMEs) compresses Earth's magnetosphere, inducing powerful electric currents in the upper atmosphere and on the ground. These currents, called <strong>Geomagnetically Induced Currents (GICs)</strong>, can flow through power transmission lines and transformers, causing equipment damage and widespread blackouts.</p>
        <p style="line-height: 1.8; margin-top: 10px;">Power grids are particularly vulnerable because they act as giant antennas for these space weather-induced electric fields. Long transmission lines running east-west are most susceptible, especially at higher latitudes where geomagnetic field variations are strongest.</p>
      </div>
      
      <div style="margin-bottom: 25px;">
        <h3 style="color: var(--accent); font-size: 1.3rem; margin-bottom: 10px;">üî¨ Scientific Properties</h3>
        <ul style="line-height: 1.8; padding-left: 25px;">
          <li><strong>Geomagnetic Storm Scale (G-Scale):</strong> NOAA classifies storms from G1 (minor) to G5 (extreme). G1 storms cause minor grid fluctuations. G5 storms can cause complete grid collapse and transformer damage requiring months to replace.</li>
          <li><strong>Geomagnetically Induced Currents (GICs):</strong> Quasi-DC currents (0.001-1 Hz) that flow through the grounding points of transformers. Can reach 100+ amperes during severe storms, causing transformer saturation, overheating, and permanent damage.</li>
          <li><strong>Transformer Hot-Spot Heating:</strong> GICs cause half-cycle saturation in transformers, generating excessive heat. A transformer's insulation degrades exponentially with temperature‚Äîa 6¬∞C increase can halve its lifespan.</li>
          <li><strong>Grid Stability Metrics:</strong> Voltage must stay within ¬±5% of nominal. Frequency must remain at 60 Hz (¬±0.05 Hz in North America). During storms, both can fluctuate dangerously.</li>
        </ul>
      </div>
      
      <div style="margin-bottom: 25px;">
        <h3 style="color: var(--accent); font-size: 1.3rem; margin-bottom: 10px;">üëÄ Real-World Observations</h3>
        <p style="line-height: 1.8;"><strong>NASA Data Example:</strong> The <a href="https://data.nasa.gov/" target="_blank" style="color: #7cf4ff;">March 1989 Quebec Blackout</a> was triggered by a G5 geomagnetic storm. In just 90 seconds, the entire Quebec power grid collapsed, leaving 6 million people without electricity for 9 hours. The storm induced currents exceeding 100 amperes, causing seven transformers to trip and triggering a cascading failure.</p>
        <p style="line-height: 1.8; margin-top: 10px;"><strong>Economic Impact:</strong> The Halloween Storms of 2003 caused $2 billion in transformer damage globally. A Carrington-class event (G5+) today could cause $2 trillion in damage and take 4-10 years for full recovery, according to National Academy of Sciences estimates.</p>
        <p style="line-height: 1.8; margin-top: 10px;"><strong>Modern Vulnerability:</strong> Today's interconnected grids are MORE vulnerable than in 1989. Higher voltages (765 kV lines), longer transmission distances, and just-in-time transformer inventories mean a major storm could leave regions dark for months.</p>
      </div>
      
      <div style="margin-bottom: 25px;">
        <h3 style="color: var(--accent); font-size: 1.3rem; margin-bottom: 10px;">üìä Understanding the Controls</h3>
        <div style="background: rgba(124, 244, 255, 0.1); padding: 15px; border-radius: 10px; margin-top: 10px;">
          <p style="margin-bottom: 10px;"><strong>Geomagnetic Storm Level (G0-G5):</strong> NOAA's space weather scale. G0 = quiet. G1-G2 = minor voltage fluctuations. G3 = voltage control problems. G4 = widespread voltage control issues. G5 = complete grid collapse possible. Based on Kp index and magnetometer readings.</p>
          <p style="margin-bottom: 10px;"><strong>Grid Load (0-120%):</strong> Percentage of maximum capacity. 60-80% = normal operation with reserves. 90-100% = peak demand, limited reserves. Above 100% = overload condition requiring load shedding to prevent cascading failures.</p>
          <p style="margin-bottom: 10px;"><strong>Transformer Temperature (20-120¬∞C):</strong> Core/winding temperature. Normal: 40-80¬∞C. Above 90¬∞C: insulation degradation accelerates. Above 105¬∞C: emergency condition, immediate action required. Above 115¬∞C: thermal runaway and permanent damage imminent.</p>
          <p><strong>Grid Shielding Level (0-100%):</strong> Protective measures: neutral blocking devices, series capacitors, static VAR compensators. 0% = no protection. 50% = typical grid. 100% = comprehensive GIC blocking, real-time monitoring, and automated load shedding protocols.</p>
        </div>
      </div>
      
      <div style="background: rgba(124, 244, 255, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #7cf4ff;">
        <h3 style="color: #7cf4ff; font-size: 1.2rem; margin-bottom: 10px;">‚ö° Owen's Story</h3>
        <p style="line-height: 1.8; font-style: italic;">"I'm Owen, senior grid operator at a regional power authority managing 2.5 million customers. On September 7th, 2017, I was on night shift when NOAA issued a G4 geomagnetic storm warning‚Äîthe first in years. At 11:47 PM, I saw transformer #7 temperature spike from 65¬∞C to 92¬∞C in minutes. Voltage on Line 34 was swinging ¬±8%, way beyond normal. I immediately shed 15% of load‚Äîcutting power to industrial customers‚Äîand activated our GIC blocking devices. We stayed up all night monitoring temperatures. By morning, five transformers showed elevated readings, but none failed. If we hadn't acted, we could have lost transformers that take 18 months to replace. Space weather is now part of my daily briefing."</p>
      </div>
    </div>
    
    <div style="background: var(--card); border: 2px solid var(--border); border-radius: 20px; padding: 30px; margin-bottom: 30px;">
      <h2 style="color: var(--accent); margin-bottom: 20px;">üéÆ Interactive Simulation</h2>
      <p style="line-height: 1.8; margin-bottom: 20px;">Experience Owen's decision-making challenges. Adjust storm intensity, grid load, and protection measures to keep the power grid stable during space weather events.</p>
    </div>
    
    <div class="simulator">
      <div class="visualizer">
        <h2 style="margin-bottom: 20px;">Power Grid Status</h2>
        <div class="grid-display" id="gridDisplay"></div>
        <div class="info">
          <strong>System Status:</strong>
          <p id="statusText" class="status-ok">All systems operating normally.</p>
        </div>
      </div>
      
      <div class="controls">
        <h3 style="margin-bottom: 20px; color: var(--accent);">Control Panel</h3>
        
        <div class="control-group">
          <label for="geomagneticStorm">Geomagnetic Storm Level (G0-G5)
            <span style="font-size: 0.8rem; font-weight: normal; opacity: 0.8;">(NOAA Space Weather Scale)</span>
          </label>
          <input type="range" id="geomagneticStorm" min="0" max="5" value="0" step="1">
          <div class="value-display" id="stormValue">G0 - None</div>
          <p style="font-size: 0.75rem; margin-top: 5px; opacity: 0.9;">G0=Quiet, G1-G2=Minor effects, G3=Voltage problems, G4-G5=Grid collapse risk</p>
        </div>
        
        <div class="control-group">
          <label for="gridLoad">Grid Load (%)
            <span style="font-size: 0.8rem; font-weight: normal; opacity: 0.8;">(Power demand vs capacity)</span>
          </label>
          <input type="range" id="gridLoad" min="0" max="120" value="60">
          <div class="value-display" id="loadValue">60%</div>
          <p style="font-size: 0.75rem; margin-top: 5px; opacity: 0.9;">60-80%=Normal with reserves, 90-100%=Peak demand, >100%=Overload</p>
        </div>
        
        <div class="control-group">
          <label for="transformerTemp">Transformer Temperature (¬∞C)
            <span style="font-size: 0.8rem; font-weight: normal; opacity: 0.8;">(Core/winding temperature)</span>
          </label>
          <input type="range" id="transformerTemp" min="20" max="120" value="60">
          <div class="value-display" id="tempValue">60¬∞C</div>
          <p style="font-size: 0.75rem; margin-top: 5px; opacity: 0.9;">Normal: 40-80¬∞C, Warning: >90¬∞C, Critical: >105¬∞C, Failure: >115¬∞C</p>
        </div>
        
        <div class="control-group">
          <label for="shielding">Grid Shielding Level
            <span style="font-size: 0.8rem; font-weight: normal; opacity: 0.8;">(GIC protection measures)</span>
          </label>
          <input type="range" id="shielding" min="0" max="100" value="50">
          <div class="value-display" id="shieldingValue">50%</div>
          <p style="font-size: 0.75rem; margin-top: 5px; opacity: 0.9;">0%=No protection, 50%=Typical, 100%=Comprehensive GIC blocking & monitoring</p>
        </div>
        
        <div class="info" style="font-size: 0.85rem;">
          <p><strong>About GICs:</strong></p>
          <p>Geomagnetically Induced Currents (GICs) can damage transformers during solar storms.</p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Exercise Section -->
  <div class="container" style="margin-top: 30px;">
    <div style="background: var(--card); border: 2px solid var(--border); border-radius: 20px; padding: 30px;">
      <h2 style="color: var(--accent); margin-bottom: 20px;">‚úèÔ∏è Test Your Knowledge</h2>
      
      <div style="margin-bottom: 25px; padding: 20px; background: rgba(124, 244, 255, 0.05); border-radius: 12px;">
        <h3 style="color: var(--accent); font-size: 1.2rem; margin-bottom: 15px;">Exercise 1: Emergency Response</h3>
        <p style="line-height: 1.8; margin-bottom: 15px;">At 2 AM, NOAA issues a G4 storm warning. Your grid is at 85% load, transformer temps are 75¬∞C, and shielding is 40%. What should Owen do first?</p>
        <div style="padding-left: 20px;">
          <p style="margin: 10px 0;">A) Wait and monitor‚Äîtemperatures are still safe</p>
          <p style="margin: 10px 0;">B) Immediately shed 20% load and activate all GIC blocking devices</p>
          <p style="margin: 10px 0;">C) Shut down the entire grid to prevent any damage</p>
        </div>
        <details style="margin-top: 15px; padding: 15px; background: rgba(124, 244, 255, 0.1); border-radius: 8px;">
          <summary style="cursor: pointer; font-weight: 700; color: var(--accent);">Show Answer</summary>
          <p style="margin-top: 10px; line-height: 1.8;"><strong>Answer: B</strong> - G4 storms can rapidly increase transformer temperatures and induce dangerous currents. Proactive load shedding (cutting some customers) protects critical transformers and prevents cascade failures that could darken entire regions. Option A risks widespread blackout. Option C is too extreme and unnecessary if protective measures work. Real grid operators follow pre-planned protocols for different storm intensities.</p>
        </details>
      </div>
      
      <div style="margin-bottom: 25px; padding: 20px; background: rgba(124, 244, 255, 0.05); border-radius: 12px;">
        <h3 style="color: var(--accent); font-size: 1.2rem; margin-bottom: 15px;">Exercise 2: Cost-Benefit Analysis</h3>
        <p style="line-height: 1.8; margin-bottom: 15px;">Installing comprehensive GIC protection (100% shielding) costs $50 million. A replacement transformer costs $10 million and takes 18 months to arrive. If severe G5 storms occur once every 50 years and could damage 3-5 transformers, is the protection worth it?</p>
        <details style="margin-top: 15px; padding: 15px; background: rgba(124, 244, 255, 0.1); border-radius: 8px;">
          <summary style="cursor: pointer; font-weight: 700; color: var(--accent);">Show Answer</summary>
          <p style="margin-top: 10px; line-height: 1.8;"><strong>Answer: Yes</strong> - Expected transformer damage cost: $30-50 million per G5 storm. But the real cost includes: extended blackout impacts ($1-10 billion), lost economic productivity, hospital/emergency services disruption, and potential casualties. The 18-month replacement time means regions could be dark for over a year. Protection systems also help during more frequent G3-G4 storms. Most utilities now consider GIC protection essential insurance, not optional.</p>
        </details>
      </div>
      
      <div style="margin-bottom: 25px; padding: 20px; background: rgba(124, 244, 255, 0.05); border-radius: 12px;">
        <h3 style="color: var(--accent); font-size: 1.2rem; margin-bottom: 15px;">Exercise 3: Hands-On Simulation Challenge</h3>
        <p style="line-height: 1.8; margin-bottom: 15px;"><strong>Try this scenario:</strong></p>
        <ol style="line-height: 2; padding-left: 25px;">
          <li>Start with G0 storm, 60% load, 60¬∞C temp, 50% shielding - observe normal operation</li>
          <li>Set storm to G3 (moderate) - watch temperature begin to rise</li>
          <li>Increase load to 95% while keeping storm at G3 - note the combined stress</li>
          <li>Now set storm to G4 with 95% load - observe critical warnings</li>
          <li>Try to stabilize by increasing shielding to 100% and reducing load to 70%</li>
        </ol>
        <details style="margin-top: 15px; padding: 15px; background: rgba(124, 244, 255, 0.1); border-radius: 8px;">
          <summary style="cursor: pointer; font-weight: 700; color: var(--accent);">What Did You Learn?</summary>
          <p style="margin-top: 10px; line-height: 1.8;">You should have discovered that storm intensity and grid load compound each other. A moderate storm during peak load is far more dangerous than a severe storm during low load. This is why grid operators closely monitor space weather forecasts during summer heat waves (high AC load) and winter cold snaps (high heating load). Protective measures work best when deployed proactively, before temperatures spike. Once transformers overheat, damage may already be done.</p>
        </details>
      </div>
      
      <div style="padding: 20px; background: linear-gradient(135deg, rgba(124, 244, 255, 0.1), rgba(178, 141, 255, 0.1)); border-radius: 12px; border: 2px solid var(--border);">
        <h3 style="color: var(--accent); font-size: 1.2rem; margin-bottom: 10px;">üîó Explore Real NASA and NOAA Data</h3>
        <p style="line-height: 1.8; margin-bottom: 15px;">See real-time space weather impacts on power grids:</p>
        <ul style="line-height: 2; padding-left: 25px;">
          <li><a href="https://www.swpc.noaa.gov/products/geospace-ground-magnetic-perturbation-maps" target="_blank" style="color: #7cf4ff;">NOAA Geomagnetic Perturbation Maps</a> - Real-time GIC risk</li>
          <li><a href="https://www.swpc.noaa.gov/products/aurora-30-minute-forecast" target="_blank" style="color: #7cf4ff;">NOAA Aurora Forecast</a> - Shows where grid impacts are likely</li>
          <li><a href="https://ccmc.gsfc.nasa.gov/modelweb/sun/gic_realtime.php" target="_blank" style="color: #7cf4ff;">NASA GIC Forecasts</a> - Real-time geomagnetically induced current predictions</li>
          <li><a href="hub.html#calendar" style="color: #7cf4ff;">Our Space Weather Calendar</a> - Track geomagnetic storm events</li>
        </ul>
      </div>
    </div>
  </div>
  
  <script>
    const geomagneticStorm = document.getElementById('geomagneticStorm');
    const gridLoad = document.getElementById('gridLoad');
    const transformerTemp = document.getElementById('transformerTemp');
    const shielding = document.getElementById('shielding');
    
    const stormValue = document.getElementById('stormValue');
    const loadValue = document.getElementById('loadValue');
    const tempValue = document.getElementById('tempValue');
    const shieldingValue = document.getElementById('shieldingValue');
    const statusText = document.getElementById('statusText');
    const gridDisplay = document.getElementById('gridDisplay');
    
    // Create grid nodes
    for (let i = 0; i < 12; i++) {
      const node = document.createElement('div');
      node.className = 'grid-node';
      node.textContent = 'N' + (i + 1);
      node.id = 'node' + i;
      gridDisplay.appendChild(node);
    }
    
    const stormLevels = [
      'G0 - None',
      'G1 - Minor',
      'G2 - Moderate',
      'G3 - Strong',
      'G4 - Severe',
      'G5 - Extreme'
    ];
    
    function updateGrid() {
      const storm = parseInt(geomagneticStorm.value);
      const load = parseInt(gridLoad.value);
      const temp = parseInt(transformerTemp.value);
      const shield = parseInt(shielding.value);
      
      stormValue.textContent = stormLevels[storm];
      loadValue.textContent = load + '%';
      tempValue.textContent = temp + '¬∞C';
      shieldingValue.textContent = shield + '%';
      
      // Calculate risk
      const stormImpact = storm * 20;
      const loadImpact = Math.max(0, load - 80);
      const tempImpact = Math.max(0, temp - 80);
      const shieldReduction = shield / 100;
      
      const totalRisk = (stormImpact + loadImpact + tempImpact) * (1 - shieldReduction);
      
      // Update grid nodes
      const nodes = gridDisplay.querySelectorAll('.grid-node');
      nodes.forEach((node, index) => {
        node.classList.remove('active', 'overload');
        
        if (totalRisk > 80) {
          if (index < 4) node.classList.add('overload');
          else node.classList.add('active');
        } else if (totalRisk > 50) {
          if (index < 2) node.classList.add('overload');
          else node.classList.add('active');
        } else {
          node.classList.add('active');
        }
      });
      
      // Update status
      let status = '';
      let statusClass = 'status-ok';
      
      if (totalRisk < 30) {
        status = 'All systems operating normally. Grid is stable.';
        statusClass = 'status-ok';
      } else if (totalRisk < 60) {
        status = 'Moderate stress on grid. Monitor transformer temperatures.';
        statusClass = 'status-warn';
      } else if (totalRisk < 90) {
        status = 'High risk of grid instability! Consider load shedding.';
        statusClass = 'status-danger';
      } else {
        status = 'CRITICAL! Transformer damage imminent! Emergency protocols needed!';
        statusClass = 'status-danger';
      }
      
      statusText.textContent = status;
      statusText.className = statusClass;
    }
    
    geomagneticStorm.addEventListener('input', updateGrid);
    gridLoad.addEventListener('input', updateGrid);
    transformerTemp.addEventListener('input', updateGrid);
    shielding.addEventListener('input', updateGrid);
    
    updateGrid();
  </script>
</body>
</html>
