<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Engineer Power Grid Simulator</title>
  <style>
    :root {
      --bg: #0a0e1a;
      --card: #1a2540;
      --text: #e9f2ff;
      --accent: #7cf4ff;
      --border: rgba(124, 244, 255, 0.3);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: ui-rounded, system-ui, sans-serif;
      background: linear-gradient(180deg, #0a0e1a, #1a2540);
      color: var(--text);
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }
    h1 {
      font-size: 2.5rem;
      color: var(--accent);
    }
    .back-btn {
      padding: 12px 24px;
      background: rgba(124, 244, 255, 0.2);
      border: 2px solid var(--border);
      border-radius: 12px;
      color: var(--accent);
      text-decoration: none;
      font-weight: 700;
      transition: all 0.3s ease;
    }
    .back-btn:hover {
      background: rgba(124, 244, 255, 0.3);
      transform: translateY(-2px);
    }
    .simulator {
      display: grid;
      grid-template-columns: 1fr 300px;
      gap: 20px;
      margin-top: 20px;
    }
    .visualizer {
      background: var(--card);
      border: 2px solid var(--border);
      border-radius: 20px;
      padding: 30px;
      min-height: 500px;
    }
    .grid-display {
      width: 100%;
      height: 400px;
      background: #0a0e1a;
      border-radius: 12px;
      position: relative;
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      padding: 20px;
    }
    .grid-node {
      background: rgba(124, 244, 255, 0.2);
      border: 2px solid rgba(124, 244, 255, 0.5);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      transition: all 0.3s ease;
    }
    .grid-node.active {
      background: rgba(124, 244, 255, 0.4);
      box-shadow: 0 0 20px rgba(124, 244, 255, 0.6);
    }
    .grid-node.overload {
      background: rgba(255, 107, 107, 0.4);
      border-color: #ff6b6b;
      animation: blink 0.5s infinite;
    }
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    .controls {
      background: var(--card);
      border: 2px solid var(--border);
      border-radius: 20px;
      padding: 20px;
    }
    .control-group {
      margin-bottom: 25px;
    }
    .control-group label {
      display: block;
      font-weight: 700;
      margin-bottom: 10px;
      color: var(--accent);
    }
    .control-group input[type="range"] {
      width: 100%;
      height: 8px;
      background: rgba(124, 244, 255, 0.2);
      border-radius: 4px;
      outline: none;
    }
    .control-group input[type="range"]::-webkit-slider-thumb {
      appearance: none;
      width: 20px;
      height: 20px;
      background: var(--accent);
      border-radius: 50%;
      cursor: pointer;
    }
    .value-display {
      display: inline-block;
      padding: 4px 12px;
      background: rgba(124, 244, 255, 0.2);
      border-radius: 8px;
      font-weight: 700;
      margin-top: 8px;
    }
    .info {
      margin-top: 20px;
      padding: 15px;
      background: rgba(124, 244, 255, 0.1);
      border-radius: 12px;
      font-size: 0.9rem;
      line-height: 1.6;
    }
    .status-ok {
      color: #9CFF6E;
    }
    .status-warn {
      color: #FFD166;
    }
    .status-danger {
      color: #ff6b6b;
    }
    @media (max-width: 768px) {
      .simulator {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>⚡ Power Grid Simulator</h1>
      <a href="index.html" class="back-btn">← Back to Home</a>
    </div>
    
    <div class="simulator">
      <div class="visualizer">
        <h2 style="margin-bottom: 20px;">Power Grid Status</h2>
        <div class="grid-display" id="gridDisplay"></div>
        <div class="info">
          <strong>System Status:</strong>
          <p id="statusText" class="status-ok">All systems operating normally.</p>
        </div>
      </div>
      
      <div class="controls">
        <h3 style="margin-bottom: 20px; color: var(--accent);">Control Panel</h3>
        
        <div class="control-group">
          <label for="geomagneticStorm">Geomagnetic Storm Level (0-5)</label>
          <input type="range" id="geomagneticStorm" min="0" max="5" value="0" step="1">
          <div class="value-display" id="stormValue">G0 - None</div>
        </div>
        
        <div class="control-group">
          <label for="gridLoad">Grid Load (%)</label>
          <input type="range" id="gridLoad" min="0" max="120" value="60">
          <div class="value-display" id="loadValue">60%</div>
        </div>
        
        <div class="control-group">
          <label for="transformerTemp">Transformer Temperature (°C)</label>
          <input type="range" id="transformerTemp" min="20" max="120" value="60">
          <div class="value-display" id="tempValue">60°C</div>
        </div>
        
        <div class="control-group">
          <label for="shielding">Grid Shielding Level</label>
          <input type="range" id="shielding" min="0" max="100" value="50">
          <div class="value-display" id="shieldingValue">50%</div>
        </div>
        
        <div class="info" style="font-size: 0.85rem;">
          <p><strong>About GICs:</strong></p>
          <p>Geomagnetically Induced Currents (GICs) can damage transformers during solar storms.</p>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    const geomagneticStorm = document.getElementById('geomagneticStorm');
    const gridLoad = document.getElementById('gridLoad');
    const transformerTemp = document.getElementById('transformerTemp');
    const shielding = document.getElementById('shielding');
    
    const stormValue = document.getElementById('stormValue');
    const loadValue = document.getElementById('loadValue');
    const tempValue = document.getElementById('tempValue');
    const shieldingValue = document.getElementById('shieldingValue');
    const statusText = document.getElementById('statusText');
    const gridDisplay = document.getElementById('gridDisplay');
    
    // Create grid nodes
    for (let i = 0; i < 12; i++) {
      const node = document.createElement('div');
      node.className = 'grid-node';
      node.textContent = 'N' + (i + 1);
      node.id = 'node' + i;
      gridDisplay.appendChild(node);
    }
    
    const stormLevels = [
      'G0 - None',
      'G1 - Minor',
      'G2 - Moderate',
      'G3 - Strong',
      'G4 - Severe',
      'G5 - Extreme'
    ];
    
    function updateGrid() {
      const storm = parseInt(geomagneticStorm.value);
      const load = parseInt(gridLoad.value);
      const temp = parseInt(transformerTemp.value);
      const shield = parseInt(shielding.value);
      
      stormValue.textContent = stormLevels[storm];
      loadValue.textContent = load + '%';
      tempValue.textContent = temp + '°C';
      shieldingValue.textContent = shield + '%';
      
      // Calculate risk
      const stormImpact = storm * 20;
      const loadImpact = Math.max(0, load - 80);
      const tempImpact = Math.max(0, temp - 80);
      const shieldReduction = shield / 100;
      
      const totalRisk = (stormImpact + loadImpact + tempImpact) * (1 - shieldReduction);
      
      // Update grid nodes
      const nodes = gridDisplay.querySelectorAll('.grid-node');
      nodes.forEach((node, index) => {
        node.classList.remove('active', 'overload');
        
        if (totalRisk > 80) {
          if (index < 4) node.classList.add('overload');
          else node.classList.add('active');
        } else if (totalRisk > 50) {
          if (index < 2) node.classList.add('overload');
          else node.classList.add('active');
        } else {
          node.classList.add('active');
        }
      });
      
      // Update status
      let status = '';
      let statusClass = 'status-ok';
      
      if (totalRisk < 30) {
        status = 'All systems operating normally. Grid is stable.';
        statusClass = 'status-ok';
      } else if (totalRisk < 60) {
        status = 'Moderate stress on grid. Monitor transformer temperatures.';
        statusClass = 'status-warn';
      } else if (totalRisk < 90) {
        status = 'High risk of grid instability! Consider load shedding.';
        statusClass = 'status-danger';
      } else {
        status = 'CRITICAL! Transformer damage imminent! Emergency protocols needed!';
        statusClass = 'status-danger';
      }
      
      statusText.textContent = status;
      statusText.className = statusClass;
    }
    
    geomagneticStorm.addEventListener('input', updateGrid);
    gridLoad.addEventListener('input', updateGrid);
    transformerTemp.addEventListener('input', updateGrid);
    shielding.addEventListener('input', updateGrid);
    
    updateGrid();
  </script>
</body>
</html>
